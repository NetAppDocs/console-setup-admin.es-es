---
sidebar: sidebar 
permalink: task-install-connector-on-prem.html 
keywords: install connector, on prem connector installation, on prem connector, install connector on prem, manual install 
summary: Instale un agente de consola local y luego inicie sesión y configúrelo para que funcione con su organización de consola. 
---
= Instalar manualmente un agente de consola local
:hardbreaks:
:allow-uri-read: 
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ./media/


[role="lead"]
Instale un agente de consola local y luego inicie sesión y configúrelo para que funcione con su organización de consola.


NOTE: Si es un usuario de VMWare, puede utilizar un OVA para instalar un agente de consola en su VCenter.link:task-install-agent-on-prem-ova.html["Obtenga más información sobre cómo instalar un agente en un VCenter."]

Antes de realizar la instalación, deberá asegurarse de que su host (VM o host Linux) cumpla con los requisitos y de que el agente de la consola tenga acceso saliente a Internet y a las redes específicas.  Si planea utilizar servicios de datos de NetApp u opciones de almacenamiento en la nube como Cloud Volumes ONTAP, deberá crear credenciales en su proveedor de nube para agregarlas a la consola para que el agente de la consola pueda realizar acciones en la nube en su nombre.



== Prepárese para instalar el agente de consola

Antes de instalar un agente de consola, debe asegurarse de tener un equipo host que cumpla con los requisitos de instalación.  También deberá trabajar con su administrador de red para garantizar que el agente de la consola tenga acceso saliente a los puntos finales requeridos y conexiones a las redes específicas.



=== Revisar los requisitos del host del agente de la consola

Ejecute el agente de consola en un host x86 que cumpla con los requisitos de sistema operativo, RAM y puerto.  Asegúrese de que su host cumpla con estos requisitos antes de instalar el agente de consola.


NOTE: El agente de consola reserva el rango de UID y GID de 19000 a 19200.  Este rango es fijo y no se puede modificar.  Si algún software de terceros en su host utiliza UID o GID dentro de este rango, la instalación del agente fallará.  NetApp recomienda utilizar un host que esté libre de software de terceros para evitar conflictos.

Host dedicado:: El agente de consola no es compatible con un host compartido con otras aplicaciones. El host debe ser un host dedicado.  El host puede ser de cualquier arquitectura que cumpla con los siguientes requisitos de tamaño:
+
--
* CPU: 8 núcleos u 8 vCPU
* RAM: 32 GB
* Espacio en disco: se recomiendan 165 GB para el host, con los siguientes requisitos de partición:
+
** `/opt`:Debe haber 120 GiB de espacio disponibles
+
El agente utiliza `/opt` Para instalar el `/opt/application/netapp` directorio y su contenido.

** `/var`:Debe haber 40 GiB de espacio disponibles
+
El agente de consola requiere este espacio en `/var` porque Docker o Podman están diseñados para crear los contenedores dentro de este directorio.  En concreto, crearán contenedores en el `/var/lib/containers/storage` directorio.  Los montajes externos o enlaces simbólicos no funcionan para este espacio.





--
Hipervisor:: Se requiere un hipervisor alojado o de metal desnudo que esté certificado para ejecutar un sistema operativo compatible.
[[podman-versions]]Requisitos del sistema operativo y del contenedor:: El agente de consola es compatible con los siguientes sistemas operativos cuando se utiliza la consola en modo estándar o modo restringido.  Se requiere una herramienta de orquestación de contenedores antes de instalar el agente.
+
--
[cols="2a,2a,2a,2a,2a"]
|===
| Sistema operativo | Versiones de sistema operativo compatibles | Versiones de agente compatibles | Herramienta de contenedor requerida | SELinux a 


 a| 
Red Hat Enterprise Linux
 a| 
9.1 a 9.4

8.6 a 8.10

* Sólo versiones en idioma inglés.
* El host debe estar registrado en Red Hat Subscription Management.  Si no está registrado, el host no puede acceder a los repositorios para actualizar el software de terceros requerido durante la instalación del agente.

 a| 
3.9.50 o posterior con la consola en modo estándar o modo restringido
 a| 
Versión de Podman 4.6.1 o 4.9.4

<<podman-configuration,Ver los requisitos de configuración de Podman>> .
 a| 
Compatible con modo de aplicación o modo permisivo

* La administración de los sistemas Cloud Volumes ONTAP NO es compatible con agentes que tengan SELinux habilitado en el sistema operativo.




 a| 
Ubuntu
 a| 
24,04 LTS
 a| 
3.9.45 o posterior con la consola de NetApp en modo estándar o modo restringido
 a| 
Motor Docker 23.06 a 28.0.0.
 a| 
No compatible



 a| 
22,04 LTS
 a| 
3.9.50 o posterior
 a| 
Motor Docker 23.0.6 a 28.0.0.
 a| 
No compatible

|===
--




=== Configurar el acceso a la red para el agente de la consola

Configure el acceso a la red para garantizar que el agente de la consola pueda administrar recursos.  Necesita conexiones a redes de destino y acceso a Internet saliente a puntos finales específicos.

Conexiones a redes de destino:: El agente de consola requiere una conexión de red a la ubicación donde planea crear y administrar sistemas.  Por ejemplo, la red donde planea crear sistemas Cloud Volumes ONTAP o un sistema de almacenamiento en su entorno local.


Acceso a Internet de salida:: La ubicación de red donde implementa el agente de consola debe tener una conexión a Internet saliente para comunicarse con puntos finales específicos.


Puntos finales contactados desde computadoras al usar la consola NetApp basada en web::
+
--
Las computadoras que acceden a la consola desde un navegador web deben tener la capacidad de comunicarse con varios puntos finales.  Necesitará usar la consola para configurar el agente de la consola y para el uso diario de la consola.

link:reference-networking-saas-console.html["Preparar la red para la consola de NetApp"] .

--


Puntos finales contactados desde el agente de la consola:: El agente de la consola requiere acceso a Internet saliente para comunicarse con los siguientes puntos finales para administrar recursos y procesos dentro de su entorno de nube pública para las operaciones diarias.
+
--
Los puntos finales enumerados a continuación son todas entradas CNAME.

--



NOTE: Un agente de consola instalado en sus instalaciones no puede administrar recursos en Google Cloud.  Si desea administrar los recursos de Google Cloud, debe instalar un agente en Google Cloud.

[role="tabbed-block"]
====
.AWS
--
Cuando el agente de consola está instalado localmente, necesita acceso de red a los siguientes puntos finales de AWS para administrar los sistemas NetApp (como Cloud Volumes ONTAP) implementados en AWS.

Puntos finales contactados desde el agente de la consola:: El agente de la consola requiere acceso a Internet saliente para comunicarse con los siguientes puntos finales para administrar recursos y procesos dentro de su entorno de nube pública para las operaciones diarias.
+
--
Los puntos finales enumerados a continuación son todas entradas CNAME.

[cols="2a,1a"]
|===
| Puntos finales | Objetivo 


 a| 
Servicios de AWS (amazonaws.com):

* Formación de nubes
* Nube de cómputo elástica (EC2)
* Gestión de identidad y acceso (IAM)
* Servicio de gestión de claves (KMS)
* Servicio de token de seguridad (STS)
* Servicio de almacenamiento simple (S3)

 a| 
Para administrar los recursos de AWS.  El punto final depende de su región de AWS. https://docs.aws.amazon.com/general/latest/gr/rande.html["Consulte la documentación de AWS para obtener más detalles."^]



 a| 
\ https://mysupport.netapp.com
 a| 
Para obtener información de licencias y enviar mensajes de AutoSupport al soporte de NetApp .



 a| 
\ https://signin.b2c.netapp.com
 a| 
Para actualizar las credenciales del sitio de soporte de NetApp (NSS) o para agregar nuevas credenciales de NSS a la consola de NetApp .



 a| 
\ https://api.bluexp.netapp.com \ https://netapp-cloud-account.auth0.com \ https://netapp-cloud-account.us.auth0.com \ https://console.netapp.com \ https://components.console.bluexp.netapp.com \ https://cdn.auth0.com
 a| 
Proporcionar funciones y servicios dentro de la consola de NetApp .



 a| 
\ https://bluexpinfraprod.eastus2.data.azurecr.io \ https://bluexpinfraprod.azurecr.io
 a| 
Para obtener imágenes para las actualizaciones del agente de consola.

* Cuando se implementa un nuevo agente, la verificación de validación prueba la conectividad con los puntos finales actuales.  Si utilizaslink:link:reference-networking-saas-console-previous.html["puntos finales anteriores"] , la comprobación de validación falla.  Para evitar este error, omita la comprobación de validación.
+
Aunque los puntos finales anteriores aún son compatibles, NetApp recomienda actualizar las reglas de firewall a los puntos finales actuales lo antes posible. link:reference-networking-saas-console-previous.html#update-endpoint-list["Aprenda a actualizar su lista de puntos finales"] .

* Cuando actualice los puntos finales actuales en su firewall, sus agentes existentes continuarán funcionando.


|===
--


--
.Azur
--
Cuando el agente de consola está instalado localmente, necesita acceso de red a los siguientes puntos de conexión de Azure para administrar los sistemas NetApp (como Cloud Volumes ONTAP) implementados en Azure.

[cols="2a,1a"]
|===
| Puntos finales | Objetivo 


 a| 
\ https://management.azure.com \ https://login.microsoftonline.com \ https://blob.core.windows.net \ https://core.windows.net
 a| 
Para administrar recursos en regiones públicas de Azure.



 a| 
\ https://management.chinacloudapi.cn \ https://login.chinacloudapi.cn \ https://blob.core.chinacloudapi.cn \ https://core.chinacloudapi.cn
 a| 
Para administrar recursos en las regiones de Azure China.



 a| 
\ https://mysupport.netapp.com
 a| 
Para obtener información de licencias y enviar mensajes de AutoSupport al soporte de NetApp .



 a| 
\ https://signin.b2c.netapp.com
 a| 
Para actualizar las credenciales del sitio de soporte de NetApp (NSS) o para agregar nuevas credenciales de NSS a la consola de NetApp .



 a| 
\ https://api.bluexp.netapp.com \ https://netapp-cloud-account.auth0.com \ https://netapp-cloud-account.us.auth0.com \ https://console.netapp.com \ https://components.console.bluexp.netapp.com \ https://cdn.auth0.com
 a| 
Proporcionar funciones y servicios dentro de la consola de NetApp .



 a| 
\ https://bluexpinfraprod.eastus2.data.azurecr.io \ https://bluexpinfraprod.azurecr.io
 a| 
Para obtener imágenes para las actualizaciones del agente de consola.

* Cuando se implementa un nuevo agente, la verificación de validación prueba la conectividad con los puntos finales actuales.  Si utilizaslink:link:reference-networking-saas-console-previous.html["puntos finales anteriores"] , la comprobación de validación falla.  Para evitar este error, omita la comprobación de validación.
+
Aunque los puntos finales anteriores aún son compatibles, NetApp recomienda actualizar las reglas de firewall a los puntos finales actuales lo antes posible. link:reference-networking-saas-console-previous.html#update-endpoint-list["Aprenda a actualizar su lista de puntos finales"] .

* Cuando actualice los puntos finales actuales en su firewall, sus agentes existentes continuarán funcionando.


|===
--
====
Servidor proxy:: NetApp admite configuraciones de proxy explícitas y transparentes.  Si está utilizando un proxy transparente, solo necesita proporcionar el certificado para el servidor proxy.  Si está utilizando un proxy explícito, también necesitará la dirección IP y las credenciales.
+
--
* Dirección IP
* Cartas credenciales
* Certificado HTTPS


--


Puertos:: No hay tráfico entrante al agente de la consola, a menos que usted lo inicie o si se utiliza como proxy para enviar mensajes de AutoSupport desde Cloud Volumes ONTAP al soporte de NetApp .
+
--
* HTTP (80) y HTTPS (443) brindan acceso a la interfaz de usuario local, que utilizará en circunstancias excepcionales.
* SSH (22) solo es necesario si necesita conectarse al host para solucionar problemas.
* Se requieren conexiones entrantes a través del puerto 3128 si implementa sistemas Cloud Volumes ONTAP en una subred donde no hay una conexión a Internet saliente disponible.
+
Si los sistemas Cloud Volumes ONTAP no tienen una conexión a Internet saliente para enviar mensajes de AutoSupport , la consola configura automáticamente esos sistemas para usar un servidor proxy que está incluido con el agente de la consola.  El único requisito es garantizar que el grupo de seguridad del agente de la consola permita conexiones entrantes a través del puerto 3128.  Necesitará abrir este puerto después de implementar el agente de consola.



--


Habilitar NTP:: Si planea utilizar NetApp Data Classification para escanear sus fuentes de datos corporativos, debe habilitar un servicio de Protocolo de tiempo de red (NTP) tanto en el agente de consola como en el sistema de clasificación de datos de NetApp para que la hora se sincronice entre los sistemas. https://docs.netapp.com/us-en/bluexp-classification/concept-cloud-compliance.html["Obtenga más información sobre la clasificación de datos de NetApp"^]




=== Crear permisos de nube de agente de consola para AWS o Azure

Si desea utilizar los servicios de datos de NetApp en AWS o Azure con un agente de consola local, deberá configurar permisos en su proveedor de nube y luego agregar las credenciales al agente de consola después de instalarlo.


TIP: Debes instalar el agente de consola en Google Cloud para administrar cualquier recurso que resida allí.

[role="tabbed-block"]
====
.AWS
--
Cuando el agente de la consola está instalado localmente, debe proporcionarle a la consola permisos de AWS agregando claves de acceso para un usuario de IAM que tenga los permisos necesarios.

Debe utilizar este método de autenticación si el agente de consola está instalado localmente.  No puedes utilizar un rol IAM.

.Pasos
. Inicie sesión en la consola de AWS y navegue hasta el servicio IAM.
. Crear una política:
+
.. Seleccione *Políticas > Crear política*.
.. Seleccione *JSON* y copie y pegue el contenido dellink:reference-permissions-aws.html["Política de IAM para el agente de consola"] .
.. Complete los pasos restantes para crear la política.
+
Según los servicios de datos de NetApp que planee utilizar, es posible que necesite crear una segunda política.

+
Para las regiones estándar, los permisos se distribuyen en dos políticas.  Se requieren dos políticas debido a un límite máximo de tamaño de caracteres para las políticas administradas en AWS. link:reference-permissions-aws.html["Obtenga más información sobre las políticas de IAM para el agente de consola"] .



. Adjuntar las políticas a un usuario de IAM.
+
** https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_create.html["Documentación de AWS: Creación de roles de IAM"^]
** https://docs.aws.amazon.com/IAM/latest/UserGuide/access_policies_manage-attach-detach.html["Documentación de AWS: Cómo agregar y eliminar políticas de IAM"^]


. Asegúrese de que el usuario tenga una clave de acceso que pueda agregar a la consola de NetApp después de instalar el agente de la consola.


.Resultado
Ahora debería tener claves de acceso para un usuario de IAM que tenga los permisos necesarios.  Después de instalar el agente de la consola, asocie estas credenciales con el agente de la consola desde la consola.

--
.Azur
--
Cuando el agente de consola está instalado localmente, debe proporcionarle permisos de Azure configurando una entidad de servicio en Microsoft Entra ID y obteniendo las credenciales de Azure que necesita el agente de consola.

.Cree una aplicación Microsoft Entra para el control de acceso basado en roles
. Asegúrese de tener permisos en Azure para crear una aplicación de Active Directory y asignar la aplicación a un rol.
+
Para más detalles, consulte https://docs.microsoft.com/en-us/azure/active-directory/develop/howto-create-service-principal-portal#required-permissions/["Documentación de Microsoft Azure: Permisos necesarios"^]

. Desde el portal de Azure, abra el servicio *Microsoft Entra ID*.
+
image:screenshot_azure_ad.png["Muestra el servicio Active Directory en Microsoft Azure."]

. En el menú, seleccione *Registros de aplicaciones*.
. Seleccione *Nuevo registro*.
. Especifique detalles sobre la aplicación:
+
** *Nombre*: Ingrese un nombre para la aplicación.
** *Tipo de cuenta*: seleccione un tipo de cuenta (cualquiera funcionará con la consola de NetApp ).
** *URI de redirección*: Puede dejar este campo en blanco.


. Seleccione *Registrarse*.
+
Ha creado la aplicación AD y la entidad principal de servicio.



.Asignar la aplicación a un rol
. Crear un rol personalizado:
+
Tenga en cuenta que puede crear un rol personalizado de Azure mediante el portal de Azure, Azure PowerShell, la CLI de Azure o la API REST.  Los siguientes pasos muestran cómo crear el rol mediante la CLI de Azure.  Si prefiere utilizar un método diferente, consulte https://learn.microsoft.com/en-us/azure/role-based-access-control/custom-roles#steps-to-create-a-custom-role["Documentación de Azure"^]

+
.. Copiar el contenido dellink:reference-permissions-azure.html["Permisos de roles personalizados para el agente de la consola"] y guardarlos en un archivo JSON.
.. Modifique el archivo JSON agregando identificadores de suscripción de Azure al ámbito asignable.
+
Debe agregar el ID de cada suscripción de Azure desde la cual los usuarios crearán sistemas Cloud Volumes ONTAP .

+
*Ejemplo*

+
[source, json]
----
"AssignableScopes": [
"/subscriptions/d333af45-0d07-4154-943d-c25fbzzzzzzz",
"/subscriptions/54b91999-b3e6-4599-908e-416e0zzzzzzz",
"/subscriptions/398e471c-3b42-4ae7-9b59-ce5bbzzzzzzz"
----
.. Utilice el archivo JSON para crear un rol personalizado en Azure.
+
Los siguientes pasos describen cómo crear el rol mediante Bash en Azure Cloud Shell.

+
*** Comenzar https://docs.microsoft.com/en-us/azure/cloud-shell/overview["Azure Cloud Shell"^] y elija el entorno Bash.
*** Sube el archivo JSON.
+
image:screenshot_azure_shell_upload.png["Una captura de pantalla de Azure Cloud Shell donde puede elegir la opción de cargar un archivo."]

*** Utilice la CLI de Azure para crear el rol personalizado:
+
[source, azurecli]
----
az role definition create --role-definition Connector_Policy.json
----
+
Ahora debería tener un rol personalizado llamado Operador de consola que puede asignar a la máquina virtual del agente de consola.





. Asignar la aplicación al rol:
+
.. Desde el portal de Azure, abra el servicio *Suscripciones*.
.. Seleccione la suscripción.
.. Seleccione *Control de acceso (IAM) > Agregar > Agregar asignación de rol*.
.. En la pestaña *Rol*, seleccione el rol *Operador de consola* y seleccione *Siguiente*.
.. En la pestaña *Miembros*, complete los siguientes pasos:
+
*** Mantenga seleccionado *Usuario, grupo o entidad de servicio*.
*** Seleccionar *Seleccionar miembros*.
+
image:screenshot-azure-service-principal-role.png["Una captura de pantalla del portal de Azure que muestra la página Miembros al agregar un rol a una aplicación."]

*** Busque el nombre de la aplicación.
+
He aquí un ejemplo:

+
image:screenshot_azure_service_principal_role.png["Una captura de pantalla del portal de Azure que muestra el formulario Agregar asignación de rol en el portal de Azure."]

*** Seleccione la aplicación y seleccione *Seleccionar*.
*** Seleccione *Siguiente*.


.. Seleccione *Revisar + asignar*.
+
La entidad de servicio ahora tiene los permisos de Azure necesarios para implementar el agente de consola.

+
Si desea implementar Cloud Volumes ONTAP desde varias suscripciones de Azure, debe vincular la entidad de servicio a cada una de esas suscripciones.  En la consola de NetApp , puede seleccionar la suscripción que desea utilizar al implementar Cloud Volumes ONTAP.





.Agregar permisos de la API de administración de servicios de Windows Azure
. En el servicio *Microsoft Entra ID*, seleccione *Registros de aplicaciones* y seleccione la aplicación.
. Seleccione *Permisos de API > Agregar un permiso*.
. En *API de Microsoft*, seleccione *Administración de servicios de Azure*.
+
image:screenshot_azure_service_mgmt_apis.gif["Una captura de pantalla del portal de Azure que muestra los permisos de la API de administración de servicios de Azure."]

. Seleccione *Acceder a Azure Service Management como usuarios de la organización* y luego seleccione *Agregar permisos*.
+
image:screenshot_azure_service_mgmt_apis_add.gif["Una captura de pantalla del portal de Azure que muestra cómo agregar las API de administración de servicios de Azure."]



.Obtenga el ID de la aplicación y el ID del directorio para la aplicación
. En el servicio *Microsoft Entra ID*, seleccione *Registros de aplicaciones* y seleccione la aplicación.
. Copie el *ID de la aplicación (cliente)* y el *ID del directorio (inquilino)*.
+
image:screenshot_azure_app_ids.gif["Una captura de pantalla que muestra el ID de la aplicación (cliente) y el ID del directorio (inquilino) de una aplicación en Microsoft Entra IDy."]

+
Cuando agrega la cuenta de Azure a la consola, debe proporcionar el identificador de la aplicación (cliente) y el identificador del directorio (inquilino) para la aplicación.  La consola utiliza los ID para iniciar sesión mediante programación.



.Crear un secreto de cliente
. Abra el servicio *Microsoft Entra ID*.
. Selecciona *Registros de aplicaciones* y selecciona tu aplicación.
. Seleccione *Certificados y secretos > Nuevo secreto de cliente*.
. Proporcione una descripción del secreto y una duración.
. Seleccione *Agregar*.
. Copia el valor del secreto del cliente.
+
image:screenshot_azure_client_secret.gif["Una captura de pantalla del portal de Azure que muestra un secreto de cliente para la entidad de servicio de Microsoft Entra."]



--
====


== Instalar manualmente un agente de consola

Cuando instala manualmente un agente de consola, debe preparar el entorno de su máquina para que cumpla con los requisitos.  Necesitarás una máquina Linux y necesitarás instalar Podman o Docker, dependiendo de tu sistema operativo Linux.



=== Instalar Podman o Docker Engine

Dependiendo de su sistema operativo, se requiere Podman o Docker Engine antes de instalar el agente.

* Podman es necesario para Red Hat Enterprise Linux 8 y 9.
+
<<podman-versions,Ver las versiones compatibles de Podman>> .

* Se requiere Docker Engine para Ubuntu.
+
<<podman-versions,Ver las versiones compatibles de Docker Engine>> .



.Pasos
[role="tabbed-block"]
====
.Podman
--
Siga estos pasos para instalar y configurar Podman:

* Habilitar e iniciar el servicio podman.socket
* Instalar Python3
* Instalar el paquete podman-compose versión 1.0.6
* Agregue podman-compose a la variable de entorno PATH
* Si usa Red Hat Enterprise Linux 8, verifique que su versión de Podman esté usando Aardvark DNS en lugar de CNI



NOTE: Ajuste el puerto aardvark-dns (predeterminado: 53) después de instalar el agente para evitar conflictos en el puerto DNS.  Siga las instrucciones para configurar el puerto.

.Pasos
. Elimine el paquete podman-docker si está instalado en el host.
+
[source, cli]
----
dnf remove podman-docker
rm /var/run/docker.sock
----
. Instalar Podman.
+
Puede obtener Podman desde los repositorios oficiales de Red Hat Enterprise Linux.

+
Para Red Hat Enterprise Linux 9:

+
[source, cli]
----
sudo dnf install podman-2:<version>
----
+
Donde <versión> es la versión compatible de Podman que estás instalando. <<podman-versions,Ver las versiones compatibles de Podman>> .

+
Para Red Hat Enterprise Linux 8:

+
[source, cli]
----
sudo dnf install podman-3:<version>
----
+
Donde <versión> es la versión compatible de Podman que estás instalando. <<podman-versions,Ver las versiones compatibles de Podman>> .

. Habilite e inicie el servicio podman.socket.
+
[source, cli]
----
sudo systemctl enable --now podman.socket
----
. Instalar python3.
+
[source, cli]
----
sudo dnf install python3
----
. Instale el paquete del repositorio EPEL si aún no está disponible en su sistema.
. Si utiliza Red Hat Enterprise:
+
Este paso es necesario porque podman-compose está disponible en el repositorio de Paquetes adicionales para Enterprise Linux (EPEL).

+
Para Red Hat Enterprise Linux 9:

+
[source, cli]
----
sudo dnf install https://dl.fedoraproject.org/pub/epel/epel-release-latest-9.noarch.rpm
----
+
Para Red Hat Enterprise Linux 8:

+
[source, cli]
----
sudo dnf install https://dl.fedoraproject.org/pub/epel/epel-release-latest-8.noarch.rpm
----
. Instalar el paquete podman-compose 1.0.6.
+
[source, cli]
----
sudo dnf install podman-compose-1.0.6
----
+

NOTE: Usando el `dnf install` El comando cumple con el requisito de agregar podman-compose a la variable de entorno PATH.  El comando de instalación agrega podman-compose a /usr/bin, que ya está incluido en el `secure_path` opción en el host.

. Si usa Red Hat Enterprise Linux 8, verifique que su versión de Podman esté usando NetAvark con Aardvark DNS en lugar de CNI.
+
.. Verifique si su networkBackend está configurado en CNI ejecutando el siguiente comando:
+
[source, cli]
----
podman info | grep networkBackend
----
.. Si la red Backend está configurada en `CNI` , tendrás que cambiarlo a `netavark` .
.. Instalar `netavark` y `aardvark-dns` utilizando el siguiente comando:
+
[source, cli]
----
dnf install aardvark-dns netavark
----
.. Abrir el `/etc/containers/containers.conf` archivo y modificar la opción network_backend para usar "netavark" en lugar de "cni".


+
Si `/etc/containers/containers.conf` no existe, realice los cambios de configuración a `/usr/share/containers/containers.conf` .

. Reiniciar podman.
+
[source, cli]
----
systemctl restart podman
----
. Confirme que networkBackend ahora se cambió a "netavark" usando el siguiente comando:
+
[source, cli]
----
podman info | grep networkBackend
----


--
.Motor Docker
--
Siga la documentación de Docker para instalar Docker Engine.

.Pasos
. https://docs.docker.com/engine/install/["Ver instrucciones de instalación desde Docker"^]
+
Siga los pasos para instalar una versión compatible de Docker Engine.  No instale la última versión, ya que la consola no es compatible.

. Verifique que Docker esté habilitado y ejecutándose.
+
[source, cli]
----
sudo systemctl enable docker && sudo systemctl start docker
----


--
====


=== Instalar el agente de consola manualmente

Descargue e instale el software del agente de consola en un host Linux existente en las instalaciones.

.Antes de empezar
Debes tener lo siguiente:

* Privilegios de root para instalar el agente de consola.
* Detalles sobre un servidor proxy, si se requiere un proxy para el acceso a Internet desde el agente de la consola.
+
Tiene la opción de configurar un servidor proxy después de la instalación, pero para hacerlo es necesario reiniciar el agente de la consola.

* Un certificado firmado por una CA, si el servidor proxy usa HTTPS o si el proxy es un proxy interceptor.



NOTE: No es posible configurar un certificado para un servidor proxy transparente al instalar manualmente el agente de consola.  Si necesita configurar un certificado para un servidor proxy transparente, debe utilizar la Consola de mantenimiento después de la instalación. Obtenga más información sobre ellink:reference-connector-maint-console.html["Consola de mantenimiento del agente"] .

.Acerca de esta tarea
El instalador que está disponible en el sitio de soporte de NetApp podría ser una versión anterior.  Después de la instalación, el agente de consola se actualiza automáticamente si hay una nueva versión disponible.

.Pasos
. Si las variables del sistema _http_proxy_ o _https_proxy_ están configuradas en el host, elimínelas:
+
[source, cli]
----
unset http_proxy
unset https_proxy
----
+
Si no elimina estas variables del sistema, la instalación fallará.

. Descargue el software del agente de consola desde https://mysupport.netapp.com/site/products/all/details/cloud-manager/downloads-tab["Sitio de soporte de NetApp"^] y luego copiarlo al host Linux.
+
Debe descargar el instalador del agente "en línea" diseñado para su uso en su red o en la nube.

. Asignar permisos para ejecutar el script.
+
[source, cli]
----
chmod +x NetApp_Console_Agent_Cloud_<version>
----
+
Donde <versión> es la versión del agente de consola que descargó.

. Si realiza la instalación en un entorno de nube gubernamental, desactive las comprobaciones de configuración.link:task-troubleshoot-connector.html#disable-config-check["Aprenda cómo deshabilitar las comprobaciones de configuración para instalaciones manuales."]
. Ejecute el script de instalación.
+
[source, cli]
----
 ./NetApp_Console_Agent_Cloud_<version> --proxy <HTTP or HTTPS proxy server> --cacert <path and file name of a CA-signed certificate>
----
+
Necesitará agregar información de proxy si su red requiere un proxy para acceder a Internet.  Puede agregar un proxy transparente o explícito.  Los parámetros --proxy y --cacert son opcionales y no se le pedirá que los agregue.  Si tiene un servidor proxy, deberá ingresar los parámetros como se muestra.

+
A continuación se muestra un ejemplo de configuración de un servidor proxy explícito con un certificado firmado por una CA:

+
[source, cli]
----
 ./NetApp_Console_Agent_Cloud_v4.0.0--proxy https://user:password@10.0.0.30:8080/ --cacert /tmp/cacert/certificate.cer
----
+
`--proxy`configura el agente de la consola para utilizar un servidor proxy HTTP o HTTPS utilizando uno de los siguientes formatos:

+
** \http://dirección:puerto
** \http://nombre-de-usuario:contraseña@dirección:puerto
** \http://nombre-de-dominio%92nombre-de-usuario:contraseña@dirección:puerto
** \https://dirección:puerto
** \https://nombre-de-usuario:contraseña@dirección:puerto
** \https://nombre-de-dominio%92nombre-de-usuario:contraseña@dirección:puerto
+
Tenga en cuenta lo siguiente:

+
*** El usuario puede ser un usuario local o un usuario de dominio.
*** Para un usuario de dominio, debe utilizar el código ASCII para un \ como se muestra arriba.
*** El agente de consola no admite nombres de usuario ni contraseñas que incluyan el carácter @.
*** Si la contraseña incluye alguno de los siguientes caracteres especiales, debe escapar ese carácter especial anteponiéndolo con una barra invertida: & o !
+
Por ejemplo:

+
\http://bxpproxyuser:netapp1\!@dirección:3128







`--cacert`Especifica un certificado firmado por CA para usar para el acceso HTTPS entre el agente de consola y el servidor proxy.  Este parámetro es necesario para servidores proxy HTTPS, servidores proxy interceptores y servidores proxy transparentes.

+ Aquí hay un ejemplo de configuración de un servidor proxy transparente.  Cuando configura un proxy transparente, no necesita definir el servidor proxy.  Solo debe agregar un certificado firmado por una CA a su host del agente de consola:

+

[source, cli]
----
 ./NetApp_Console_Agent_Cloud_v4.0.0 --cacert /tmp/cacert/certificate.cer
----
. Si utilizó Podman, necesitará ajustar el puerto aardvark-dns.
+
.. SSH a la máquina virtual del agente de consola.
.. Abra el archivo podman _/usr/share/containers/containers.conf_ y modifique el puerto elegido para el servicio DNS de Aardvark.  Por ejemplo, cámbielo a 54.
+
[source, cli]
----
vi /usr/share/containers/containers.conf
...
# Port to use for dns forwarding daemon with netavark in rootful bridge
# mode and dns enabled.
# Using an alternate port might be useful if other DNS services should
# run on the machine.
#
dns_bind_port = 54
...
Esc:wq
----
.. Reinicie la máquina virtual del agente de consola.




.¿Que sigue?
Necesitará registrar el agente de consola dentro de la consola de NetApp .



== Registrar el agente de consola con NetApp Console

Inicie sesión en la consola y asocie el agente de la consola con su organización.  La forma de iniciar sesión depende del modo en que esté utilizando la Consola.  Si está utilizando la consola en modo estándar, inicie sesión a través del sitio web de SaaS.  Si está utilizando la consola en modo restringido, inicie sesión localmente desde el host del agente de la consola.

.Pasos
. Abra un navegador web e ingrese la URL del host del agente de la consola:
+
La URL del host de la consola puede ser un host local, una dirección IP privada o una dirección IP pública, según la configuración del host.  Por ejemplo, si el agente de la consola está en la nube pública sin una dirección IP pública, debe ingresar una dirección IP privada de un host que tenga una conexión al host del agente de la consola.

. Regístrate o inicia sesión.
. Después de iniciar sesión, configure la consola:
+
.. Especifique la organización de la consola que se asociará con el agente de la consola.
.. Introduzca un nombre para el sistema.
.. En *¿Está ejecutando en un entorno seguro?* mantenga el modo restringido deshabilitado.
+
El modo restringido no es compatible cuando el agente de consola está instalado localmente.

.. Seleccione *Comencemos*.






== Proporcionar credenciales del proveedor de nube a la consola de NetApp

Después de instalar y configurar el agente de consola, agregue sus credenciales de nube para que el agente de consola tenga los permisos necesarios para realizar acciones en AWS o Azure.

[role="tabbed-block"]
====
.AWS
--
.Antes de empezar
Si acaba de crear estas credenciales de AWS, es posible que tarden unos minutos en estar disponibles.  Espere unos minutos antes de agregar las credenciales a la consola.

.Pasos
. Seleccione *Administración > Credenciales*.
. Seleccione *Credenciales de la organización*.
. Seleccione *Agregar credenciales* y siga los pasos del asistente.
+
.. *Ubicación de credenciales*: seleccione *Amazon Web Services > Agente.
.. *Definir credenciales*: ingrese una clave de acceso de AWS y una clave secreta.
.. *Suscripción al Marketplace*: asocie una suscripción al Marketplace con estas credenciales suscribiéndose ahora o seleccionando una suscripción existente.
.. *Revisar*: Confirme los detalles sobre las nuevas credenciales y seleccione *Agregar*.




Ya puedes ir a la https://console.netapp.com["Consola de NetApp"^] para comenzar a utilizar el agente de consola.

--
.Azur
--
.Antes de empezar
Si acaba de crear estas credenciales de Azure, es posible que tarden unos minutos en estar disponibles.  Espere unos minutos antes de agregar las credenciales del agente de consola.

.Pasos
. Seleccione *Administración > Credenciales*.
. Seleccione *Agregar credenciales* y siga los pasos del asistente.
+
.. *Ubicación de credenciales*: seleccione *Microsoft Azure > Agente*.
.. *Definir credenciales*: ingrese información sobre la entidad de servicio de Microsoft Entra que otorga los permisos necesarios:
+
*** ID de la aplicación (cliente)
*** ID de directorio (inquilino)
*** Secreto del cliente


.. *Suscripción al Marketplace*: asocie una suscripción al Marketplace con estas credenciales suscribiéndose ahora o seleccionando una suscripción existente.
.. *Revisar*: Confirme los detalles sobre las nuevas credenciales y seleccione *Agregar*.




.Resultado
El agente de consola ahora tiene los permisos que necesita para realizar acciones en Azure en su nombre.  Ya puedes ir a la https://console.netapp.com["Consola de NetApp"^] para comenzar a utilizar el agente de consola.

--
====